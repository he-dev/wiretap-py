version: 1
formatters:
  classic:
    style: "{"
    format: "{asctime}.{msecs:03d} | {module}.{funcName} | {message}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    defaults:
      status: "<status>"
      correlation: "<correlation>"
      extra: "<extra>"
  wiretap:
    (): wiretap.formatters.TextFormatter
    style: "{"
    datefmt: "%Y-%m-%d %H:%M:%S"
    fmt: "{asctime}.{msecs:03.0f} {indent} {activity} | {trace} | {elapsed:0.1f} | {message} | {note} | {tags}"
  elastic:
    (): wiretap.formatters.JSONFormatter
    encoders:
      - wiretap.json.encoders.DateTimeEncoder
      - wiretap.json.encoders.UUIDEncoder
      - wiretap.json.encoders.SetEncoder
      - wiretap.json.encoders.PathEncoder
    properties:
      - wiretap.json.properties.TimestampProperty
      - wiretap.json.properties.ActivityProperty
      - wiretap.json.properties.TraceProperty
      - wiretap.json.properties.NoteProperty
      - wiretap.json.properties.TagProperty
      - wiretap.json.properties.PreviousProperty
      # - wiretap.json.properties.SequenceProperty
      - wiretap.json.properties.SourceProperty
      - wiretap.json.properties.ExceptionProperty
      - (): wiretap.json.properties.ConstProperty
        keys:
          - app_id
handlers:
  console:
    class: logging.StreamHandler
    formatter: wiretap
    level: DEBUG
  file:
    class: "logging.handlers.TimedRotatingFileHandler"
    when: "d"
    interval: 1
    filename: "c:\\temp\\wiretap.log"
    formatter: wiretap
    level: "DEBUG"
  elastic_file:
    class: "logging.FileHandler"
    filename: "c:\\temp\\elastic.log"
    formatter: elastic
    level: "DEBUG"
  #sqlserver:
  #  class: "wiretap_sqlserver.SqlServerHandler"
  #  #connection_string: "DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost,1433;DATABASE=automation;UID=sa;PWD=;"
  #  insert: null
  #  level: "DEBUG"
  #  formatter: "auto"

loggers:
  root:
    #handlers: [ "console", "file", "elastic_file" ]
    handlers: [ "console", "elastic_file" ]
    # handlers: [ "console" ]
    level: "DEBUG"
  PIL:
    level: "WARNING"