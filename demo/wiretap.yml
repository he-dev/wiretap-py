version: 1
formatters:
  console:
    style: "{"
    format: "{asctime}.{msecs:03d} | {module}.{funcName} | {message}"
    datefmt: "%Y-%m-%d %H:%M:%S"
    defaults:
      status: "<status>"
      correlation: "<correlation>"
      extra: "<extra>"
  wiretap:
    (): "logging.Formatter"
    style: "{"
    datefmt: "%Y-%m-%d %H:%M:%S"
    fmt: "{asctime}.{msecs:03.0f} {indent} {subject}/{activity} | {trace} | {elapsed:.3f}s | {message} | {details} | {attachment}"
filters:
  timestamp_local:
    (): "wiretap.filters.AddTimestampExtra"
    tz: "local"
  context_extra:
    (): "wiretap.filters.AddContextExtra"
  trace_extra:
    (): "wiretap.filters.AddTraceExtra"
  indent:
    (): "wiretap.filters.AddIndentExtra"
    char: "_"
  strip_exc_info:
    (): "wiretap.filters.StripExcInfo"
  lower_level:
    (): "wiretap.filters.LowerLevelName"
  format_args:
    (): "wiretap.filters.FormatArgs"
  format_result:
    (): "wiretap.filters.FormatResult"
handlers:
  console:
    class: "logging.StreamHandler"
    formatter: "wiretap"
    level: "DEBUG"
    filters:
      - indent
      - timestamp_local
      - strip_exc_info
      - context_extra
      - trace_extra
      - format_args
      - format_result
  file:
    class: "logging.handlers.TimedRotatingFileHandler"
    when: "d"
    interval: 1
    filename: null
    formatter: "wiretap"
    level: "DEBUG"
    filters:
      - indent
      - timestamp_local
      - strip_exc_info
      - context_extra
      - trace_extra
      - format_args
      - format_result
  #sqlserver:
  #  class: "wiretap_sqlserver.SqlServerHandler"
  #  #connection_string: "DRIVER={ODBC Driver 18 for SQL Server};SERVER=localhost,1433;DATABASE=automation;UID=sa;PWD=;"
  #  insert: null
  #  level: "DEBUG"
  #  formatter: "auto"

loggers:
  root:
    handlers: [ "console", "file" ]
    level: "DEBUG"
  PIL:
    level: "WARNING"